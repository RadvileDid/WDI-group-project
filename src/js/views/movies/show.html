<!-- {{ vm.movieGroup }} -->

<div>
  <div class="col s12 m7">
    <div class="card horizontal">
      <div class="card-image">
        <img ng-src="https://image.tmdb.org/t/p/w500/{{ vm.movie.poster_path}}" alt="movie poster" class="test responsive-img">
      </div>
      <div class="card-stacked">
        <div class="card-content">
          <h3>{{vm.movie.title}}</h3>
          <p>{{vm.movie.overview}}</p>
          <p><span>Rating: </span> {{vm.movie.vote_average}}/10 ( {{vm.movie.vote_count}} total votes )</p>
          <p><span>Release date: </span> {{vm.movie.release_date}}</p>
          <p><span>Genre:</span> {{vm.movie.genres[0].name}}, {{vm.movie.genres[1].name}}</p>
          <p><span>Language:</span> {{vm.movie.spoken_languages[0].name}}</p>
        </div>
        <div class="row">
          <div class="col s4"></div>
          <button class="btn col s4" ng-hide="vm.isGroup && main.isAuthenticated() && (vm.movieGroup.users.indexOf(main.currentUserId) !== -1)" ng-click="vm.add()">Join Group</button>
          <div class="col s4"></div>

          <!-- {{ vm.isGroup }} -->
        </div>
      </div>
    </div>
  </div>
<div class="comments">
  <h3>Comments</h3>

  <p ng-if="!vm.movie.comments.length">0 comments</p>
  <ul class="comments__created">
    <li ng-repeat="comment in vm.movie.comments track by $index">
      <a ui-sref="usersShow({ id: comment.createdBy.id })"><strong>{{ comment.createdBy.username }}</strong></a> - {{ comment.text }}
    </li>
  </ul>

  <form ng-submit="vm.addComment()">
  <!-- <form ng-if="main.isAuthenticated()"> -->
    <label>Add comment</label>
    <textarea ng-model="vm.newComment.text"></textarea>
    <button class="button button--full">Comment</button>
  </form>

</div>
</div>
